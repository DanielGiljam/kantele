import Admonition from "@theme/Admonition";

# Related work

## Overview

### CushionDB

[CushionDB](https://cushiondb.github.io/) is a small open-source project created by three software developers; [Avshar Kirksall](https://github.com/avshrk), [Daniel Rote](https://github.com/drote) and [Jaron Truman](https://github.com/jtruman88). It describes itself as "an open-source database for progressive web applications", which sounds promising considering our use-case. It especially focuses on offline-first data management and synchronization.

### Dexie.js

[Dexie.js](https://dexie.org/) is one of the most popular libraries for interacting with [IndexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API), the browser's built-in database, that web apps can use to store data locally on the user's device. It describes itself as "a Minimalistic Wrapper for IndexedDB".

### Orbit.js

[Orbit.js](https://orbitjs.com/) is an open-source project mainly developed by [Dan Gebhardt](https://github.com/dgeb). It describes itself as

-   "The Universal Data Layer" ([website](https://orbitjs.com/) tagline),
-   "Composable data framework for ambitious web applications" (description on [GitHub](https://github.com/orbitjs/orbit)),
-   and "Orbit is a composable data framework for managing the complex needs of today's web applications." (first sentence in [`README.md`](https://github.com/orbitjs/orbit)).

[Orbit.js](https://orbitjs.com/) is a [Cerebris Corporation](https://www.cerebris.com/) product. [Dan Gebhardt](https://github.com/dgeb) is part of [Cerebris Corporation](https://www.cerebris.com/). The members of [Cerebris Corporation](https://www.cerebris.com/) are also the ones behind [Ember.js](https://emberjs.com/). [Ember.js](https://emberjs.com/) is a JavaScript framework for building heavy-duty web applications. It peaked in popularity before the rise of [React](https://react.dev/), but is quite heavily in use in the industry still today.

### SQLite as WebAssembly module

[`wa-sqlite`](https://github.com/rhashimoto/wa-sqlite) by [Ryo Hashimoto](https://github.com/rhashimoto) is a [WebAssembly](https://webassembly.org/) build of [SQLite](https://sqlite.org/index.html) which effectively brings a fully fledged relational database to the web.

## Comparison

#### Modularity

|                  | Firestore | CushionDB | Dexie.js | Orbit.js | SQLite | Tanstack Query |
| ---------------- | --------- | --------- | -------- | -------- | ------ | -------------- |
| Full-stack       | âœ…        | âœ…        | âœ…       |          |        |                |
| Backend-agnostic |           |           | âœ…       | âœ…       | âœ…     | âœ…             |
| Modular          |           |           |          | âœ…       |        |                |

#### Developer experience

|                              | Firestore | CushionDB | Dexie.js | Orbit.js | SQLite | Tanstack Query |
| ---------------------------- | --------- | --------- | -------- | -------- | ------ | -------------- |
| 1st-class TypeScript support | âœ…        |           | âœ…       | âœ…       | âœ…     | âœ…             |
| Graphical "dev tools"        |           |           |          |          |        | âœ…             |

#### UI framework integration

|                          | Firestore | CushionDB | Dexie.js | Orbit.js | SQLite | Tanstack Query |
| ------------------------ | --------- | --------- | -------- | -------- | ------ | -------------- |
| 1st-class React support  |           |           | âœ…       |          |        | âœ…             |
| 1st-class Solid support  |           |           | âœ…       |          |        | âœ…             |
| 1st-class Vue support    |           |           | âœ…       |          |        | âœ…             |
| 1st-class Svelte support |           |           | âœ…       |          |        | âœ…             |

#### ORM capabilities

|                       | Firestore | CushionDB | Dexie.js | Orbit.js | SQLite | Tanstack Query |
| --------------------- | --------- | --------- | -------- | -------- | ------ | -------------- |
| Relationship tracking |           |           |          | âœ…       | âœ…     |                |
| "Live queries"        | âœ…        |           | âœ…       | âœ…       |        |                |

#### Consideration of asynchronicity and concurrency

|                    | Firestore | CushionDB | Dexie.js | Orbit.js | SQLite | Tanstack Query |
| ------------------ | --------- | --------- | -------- | -------- | ------ | -------------- |
| Optimistic updates | âœ…        |           |          | âœ…       |        | âœ…             |
| Browser tab sync   | âœ…        |           | âœ…       |          |        | âœ…             |

#### Offline support

|                                            | Firestore | CushionDB | Dexie.js | Orbit.js | SQLite | Tanstack Query |
| ------------------------------------------ | --------- | --------- | -------- | -------- | ------ | -------------- |
| Offline-first                              | âœ…        | âœ…        |          | âœ…       |        |                |
| Data persistence                           | âœ…        | âœ…        | âœ…       | âœ…       | âœ…     | âœ…             |
| Creating when offline, publish when online | âœ…        | âœ…        |          | âœ…       |        |                |

### Notes

#### Modularity

##### Full-stack

Firestore and CushionDB are both entirely full-stack solutions.

Dexie.js is in the future going to provide a cloud-hosted sync service called Dexie Cloud. As of writing this, it's in Beta and you can sign up for the waitlist. But the library, in its core, is still a client-side library, so in a sense Dexie Cloud can also be seen as a separate entity that just happens to integrate well with Dexie.js, the client-side library.

Orbit.js, SQLite and Tanstack Query are entirely client-side solutions.

##### Backend-agnostic

Firestore and CushionDB are not backend-agnostic solutions.

Dexie.js, Orbit.js, SQLite and Tanstack Query are backend-agnostic solutions.

##### Modular

Orbit.js is the only solution that is modular in the sense that its shipped more like a toolkit where you can pick and use the tools you like and discard the rest and less like a solution that you either have to buy into entirely or not at all.

#### Developer experience

##### 1st-class TypeScript support

Firestore, Dexie.js, Orbit.js, SQLite and Tanstack Query all have 1st-class TypeScript support. CushionDB is written in JavaScript.

##### Graphical "dev tools"

Tanstack Query is the only solution that has a graphical "dev tool" / debugging interface.

#### UI framework integration

Tanstack Query and Dexie.js both have 1st-class support for React, Solid, Vue and Svelte.

Firestore, CushionDB, Orbit.js and SQLite does not have 1st-class support for any UI framework.

#### ORM capabilities

##### Relationship tracking

Firestore, Dexie.js and CushionDB are not aware of relationships in your data.

Orbit.js is aware of relationships in your data and lets you query across relationships and maintains relationships for you.

SQLite is naturally aware of relationships in your data as its a fully fledged relational database.

##### "Live queries"

The Cloud Firestore client-side SDK has "live queries" in the form of its [`onSnapshot`](https://firebase.google.com/docs/firestore/query-data/listen) API.

Dexie.js and Orbit.js have "live queries" and refer to them as "live queries".

-   [`liveQuery()` | dexie.org](<https://dexie.org/docs/liveQuery()>)
-   [Live Queries | Orbit.js](https://orbitjs.com/docs/querying-data#live-queries)

CushionDB and SQLite does not have "live queries".

#### Consideration of asynchronicity and concurrency

##### Optimistic updates

Firestore, Orbit.js and Tanstack Query provide mechanisms for doing optimistic updates.

CushionDB and SQLite don't provide any mechanisms for doing optimistic updates.

##### Browser tab sync

Firestore and Dexie.js synchronize their state across browser tabs.

Tanstack Query has a plugin, that is currently annotated as "experimental", which synchronizes the [`QueryClient`](https://tanstack.com/query/docs/reference/QueryClient)'s state across browser tabs.

#### Offline support

##### Offline-first

Firestore, CushionDB and Orbit.js were designed with the enablement of offline-first experiences in mind.

Dexie.js, SQLite and Tanstack Query were not designed with the enablement of offline-first experiences in mind.

##### Data persistence

All solutions provide mechanisms to persist data on the user's device that can be recovered in future browser sessions.

##### Creating when offline, publish when online

Firestore, CushionDB and Orbit.js provide mechanisms for creating data when offline and publishing it when online.

Dexie.js, SQLite and Tanstack Query do not provide mechanisms for creating data when offline and publishing it when online.

## Analysis

<Admonition type={"caution"} title={"TODO"} icon={"ðŸš§"}>

Write analysis.

</Admonition>
